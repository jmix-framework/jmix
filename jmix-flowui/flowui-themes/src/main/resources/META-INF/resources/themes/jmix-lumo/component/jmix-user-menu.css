/*
 * Copyright 2025 Haulmont.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

vaadin-menu-bar[jmix-role='jmix-user-menu'] vaadin-menu-bar-button.jmix-user-menu-button {
    padding: 0;
    min-width: var(--lumo-button-size);
    height: auto;
}

vaadin-menu-bar[jmix-role='jmix-user-menu'] vaadin-menu-bar-button.jmix-user-menu-button::part(label) {
    padding: 0;
}

vaadin-menu-bar[jmix-role='jmix-user-menu'] vaadin-menu-bar-item.jmix-user-menu-button {
    padding: 0;
    margin: 0;

    height: 100%;
}

/* Overlay */

vaadin-menu-bar-overlay.jmix-user-menu-overlay vaadin-menu-bar-item::part(content) {
    display: flex;
    align-items: center;
    gap: var(--lumo-space-s);
}

vaadin-menu-bar-overlay.jmix-user-menu-overlay vaadin-menu-bar-item::part(checkmark):before {
    color: inherit;
}

vaadin-menu-bar-overlay.jmix-user-menu-overlay vaadin-menu-bar-item[theme~='non-checkable'] {
    padding-inline-start: var(--lumo-space-s);
}

vaadin-menu-bar-overlay.jmix-user-menu-overlay vaadin-menu-bar-item[theme~='non-checkable']::part(checkmark) {
    display: none;
}

/* Default Button Renderer */

.jmix-user-menu-button-content {
    display: grid;
    grid-template: "avatar username"
                   "avatar subtext";
    grid-template-columns: auto 1fr;
    column-gap: var(--lumo-space-s);

    width: max-content;
    box-sizing: border-box;

    color: var(--lumo-body-text-color);
    padding: var(--lumo-space-xs) var(--lumo-space-s);
}

.jmix-user-menu-button-content > .jmix-user-menu-button-content-user-avatar {
    grid-area: avatar;
    align-self: center;
}

.jmix-user-menu-button-content > .jmix-user-menu-button-content-user-name {
    grid-row: username / subtext;
    align-self: center;
    text-align: start;

    width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}

vaadin-menu-bar[jmix-role='jmix-user-menu'][theme~='substituted'] .jmix-user-menu-button-content > .jmix-user-menu-button-content-user-name {
    grid-row: username;
}

.jmix-user-menu-button-content > .jmix-user-menu-button-content-subtext {
    grid-area: subtext;
    align-self: center;
    text-align: start;

    color: var(--lumo-secondary-text-color);
    font-size: var(--lumo-font-size-xs);

    width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}

vaadin-menu-bar[jmix-role='jmix-user-menu']:not([theme~='substituted']) .jmix-user-menu-button-content > .jmix-user-menu-button-content-subtext {
    display: none;
}
