<!--
  ~ Copyright (c) 2008-2019 Haulmont.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<window xmlns="http://jmix.io/schema/ui/window">

    <assign name="width" value="250"/>
    <assign name="widthBig" value="265"/>
    <assign name="widthTemplate" value="380"/>

    <layout expand="bands" spacing="true" margin="true;true;false;true">
        <hbox id="reportFields" spacing="true" width="100%" expand="spacer">
            <form id="propertiesFieldGroup" dataContainer="reportDc" width="AUTO">
                <column>
                    <textField id="name" required="true" property="name" requiredMessage="msg://report.nameMsg" width="${widthTemplate}"/>
                    <entityComboBox id="defaultTemplate" required="true" width="${widthTemplate}"/>
                </column>
                <column>
                    <comboBox id="group" required="true" dataContainer="groupsDc"
                              requiredMessage="msg://report.reportTypeMsg" width="${width}"/>
                    <textField id="code" property="code" width="${width}"/>
                </column>
            </form>

            <form id="descriptionFieldGroup" dataContainer="reportDc" width="AUTO">
                <column>
                    <textArea id="description" width="${widthBig}" rows="3"/>
                </column>
            </form>

            <gridLayout id="settingsGrid" spacing="true">
                <columns count="2"/>
                <rows>
                    <row>
                        <label value="msg://report.restAccess"/>
                        <checkBox datasource="reportDc" property="restAccess"/>
                    </row>
                    <row>
                        <label value="msg://report.system"/>
                        <checkBox datasource="reportDc" property="system"/>
                    </row>
                </rows>
            </gridLayout>
            <fileUpload id="invisibleFileUpload" dropZone="reportFields" stylename="c-report-upload-invisible"/>
            <label id="spacer"/>
        </hbox>

        <vbox id="bands" width="100%" height="100%">
            <split orientation="horizontal" id="hSplit" pos="30" width="100%" height="100%">
                <vbox id="treeVBox" margin="false;true;false;false" width="100%" height="100%">
                    <groupBox id="treeBox" expand="serviceTree" height="100%" width="100%" spacing="true"
                              caption="msg://report.bands">
                        <buttonsPanel>
                            <button id="createBandDefinition" icon="font-icon:PLUS"/>
                            <button id="removeBandDefinition"/>
                            <button id="up" icon="font-icon:CARET_UP"/>
                            <button id="down" icon="font-icon:CARET_DOWN"/>
                        </buttonsPanel>

                        <tree id="serviceTree" width="100%" height="100%" dataContainer="treeDc">
<!--                            <treechildren datasource="treeDs" captionProperty="name"/>-->
                        </tree>
                    </groupBox>
                </vbox>
                <!-- Split -->
                <vbox id="bandDetailsVBox" margin="false;false;false;true" width="100%" height="100%">
                    <groupBox id="bandDetailsBox" height="100%" width="100%" caption="msg://report.bandDetails">
                        <frame src="/io/jmix/reportsui/gui/definition/edit/definition-edit.xml" id="bandEditor"
                               width="100%"
                               height="100%"/>
                    </groupBox>
                </vbox>
            </split>
        </vbox>
    </layout>
</window>